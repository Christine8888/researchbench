{
    "task_id": "hubble_constant_inference",
    "paper_id": "lenstronomy",
    "kind": "numeric",
    "difficulty": 7,
    "description": "Simulate a lensed quasar system with time delays and infer the Hubble constant H0 using lenstronomy's cosmography tools.",
    "instructions": "Using the `lenstronomy` Python package, perform the following steps:\n1. Define the cosmological model: Flat Lambda-CDM with `Om0` = 0.3, `Ode0` = 0.7. Set the 'true' Hubble constant `H0_true` = 70 km/s/Mpc. Instantiate the cosmology using `lenstronomy.Cosmo.cosmology.Cosmology` (e.g., `astropy.cosmology.FlatLambdaCDM`).\n2. Define the lens redshift `z_lens` = 0.5 and source redshift `z_source` = 1.5.\n3. Define the lens mass model list:\n   - Power-Law Elliptical Mass Distribution (EPL): Einstein radius `theta_E` = 1.2 arcsec, power-law slope `gamma` = 2.1, axis ratio `q` = 0.8, position angle `phi` = 0 degrees, center `center_x` = 0, `center_y` = 0 arcsec.\n   - External Shear (SHEAR): External shear strength `gamma_ext` = 0.05, shear position angle `phi_ext` = 60 degrees.\n4. Instantiate `lenstronomy.LensModel.lens_model.LensModel` with the lens model list, `z_lens`, `z_source`, and the cosmology defined in step 1.\n5. Define the true source position: `beta_x` = 0.12 arcsec, `beta_y` = 0.08 arcsec.\n6. Find the image positions (`theta_x`, `theta_y`) using `lenstronomy.LensModel.Solver.lens_equation_solver.LensEquationSolver`.\n7. Calculate the 'true' time delays between the images relative to the first arriving image using `LensModel.arrival_time()`. These delays depend on `H0_true`.\n8. Prepare for inference: Treat the calculated image positions and time delays (from step 6 and 7) as 'observed' data. Assume uncertainties for image positions (e.g., 0.005 arcsec) and time delays (e.g., 0.1 days), although these won't affect the median recovery in this ideal simulation if the model is correct.\n9. Set up the parameter inference using `lenstronomy.Workflow.fitting_sequence.FittingSequence` or manually configure `lenstronomy.Sampling`:\n    - Define the parameters to be sampled: Include the lens model parameters (e.g., `theta_E`, `gamma`, `q`, `phi` for EPL; `gamma_ext`, `phi_ext` for SHEAR) and the Hubble constant `H0`. Keep `Om0` fixed at 0.3.\n    - Define appropriate priors for the sampled parameters (e.g., uniform priors centered around the true values).\n    - Define the likelihood function: Use `lenstronomy.Sampling.Likelihoods.time_delay_likelihood.TimeDelayLikelihood` combined with constraints on image positions.\n10. Run an MCMC sampler (e.g., `emcee` via `lenstronomy.Sampling.sampler.Sampler`) to obtain posterior probability distributions for the sampled parameters.\n11. Extract the posterior samples for `H0`.\n12. Report the median value of the inferred `H0` posterior distribution in km/s/Mpc.",
    "expected_output": 70.0,
    "tolerance": 3.0,
    "parents": [
        "time_delay_calculation",
        "cosmological_distance_calculation"
    ]
}